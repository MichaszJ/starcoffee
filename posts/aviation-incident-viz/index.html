<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <!-- <link rel=preconnect  href="https://fonts.googleapis.com"> <link rel=preconnect  href="https://fonts.gstatic.com" crossorigin> --> <link href="https://iosevka-webfonts.github.io/iosevka/iosevka.css" rel=stylesheet  /> <link href="https://iosevka-webfonts.github.io/iosevka-aile/iosevka-aile.css" rel=stylesheet  /> <link rel=stylesheet  href="/starcoffee/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/starcoffee/css/franklin.css"> <link rel=stylesheet  href="/starcoffee/css/poole_lanyon.css"> <link rel=stylesheet  href="/starcoffee/css/adjust.css"> <link rel=icon  href="/starcoffee/assets/favicon.png"> <title>Aviation Incident Visualizations</title> <input type=checkbox  class=sidebar-checkbox  id=sidebar-checkbox > <div class=sidebar  id=sidebar > <div class=sidebar-item > <p>Star Coffee</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/starcoffee/">Home</a> <a class="sidebar-nav-item " href="/starcoffee/posts/welcome-to-star-coffee/">Welcome to Star Coffee</a> <a class="sidebar-nav-item " href="/starcoffee/posts/projects/">Projects</a> <a class="sidebar-nav-item " href="/starcoffee/posts/satellite-analysis-toolkit/">Satellite Analysis Toolkit</a> <a class="sidebar-nav-item " href="/starcoffee/posts/simple-nn/">Simple NN</a> </nav> <div class=sidebar-item > <p>&copy; Michal Jagodzinski.</p> </div> </div> <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --> <div class=wrap > <div class=masthead > <div class=container > <h3 class=masthead-title > <a href="/starcoffee/" title=Home >Star Coffee</a> <small>Writing about stuff, working in public</small> </h3> </div> </div> <div class="container content"> <div class=franklin-content ><h1 id=aviation_incident_visualizations ><a href="#aviation_incident_visualizations" class=header-anchor >Aviation Incident Visualizations</a></h1> <p><em>By Michal Jagodzinski - May 1st, 2023</em></p> <div class=im-100 ><img src="https://source.unsplash.com/xLvJRf7VXXk" alt="" /></div> <div class=img-caption >Photo by <a href="https://unsplash.com/photos/xLvJRf7VXXk">Marek Piwnicki</a></div> <p>Welcome back to Star Coffee&#33; Super quick post today. I&#39;ve been getting back into data visualization &#40;as can be seen with <a href="https://michaszj.github.io/starcoffee/posts/visualizing-rocket-data/">my last post</a>&#41;, and I stumbled on a good dataset from the <a href="https://github.com/alsonpr/Aviation-Safety-Network-Dataset">Aviation Safety Network</a>. So I decided to use this dataset to practice my data visualization skills some more.</p> <p>I hope you enjoy these visualizations, and hopefully you learn some new tricks to implement for your own work.</p> <h1 id=first_visualization ><a href="#first_visualization" class=header-anchor >First Visualization</a></h1> <div class=im-100 ><img src="/starcoffee/assets/posts/aviation-incident-viz/code/fig1.png" alt=""></div> <p>Data wrangling:</p> <pre><code class="r hljs">data <span class=hljs-operator >&lt;-</span> raw_data <span class=hljs-operator >%&gt;%</span>
  mutate<span class=hljs-punctuation >(</span>
    fatalities <span class=hljs-operator >=</span> <span class=hljs-built_in >as.integer</span><span class=hljs-punctuation >(</span>fatalities<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    year <span class=hljs-operator >=</span> <span class=hljs-built_in >as.integer</span><span class=hljs-punctuation >(</span>year<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    operator <span class=hljs-operator >=</span> as.factor<span class=hljs-punctuation >(</span>operator<span class=hljs-punctuation >)</span>
  <span class=hljs-punctuation >)</span>

fig1_data <span class=hljs-operator >&lt;-</span> data <span class=hljs-operator >%&gt;%</span>
  filter<span class=hljs-punctuation >(</span><span class=hljs-operator >!</span>str_detect<span class=hljs-punctuation >(</span>operator<span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;AF|Air Force|Navy&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  group_by<span class=hljs-punctuation >(</span>year<span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  summarize<span class=hljs-punctuation >(</span>
    total_accidents <span class=hljs-operator >=</span> n<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    total_fatalities <span class=hljs-operator >=</span> <span class=hljs-built_in >sum</span><span class=hljs-punctuation >(</span>fatalities<span class=hljs-punctuation >,</span> na.rm <span class=hljs-operator >=</span> <span class=hljs-literal >TRUE</span><span class=hljs-punctuation >)</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  mutate<span class=hljs-punctuation >(</span>fatalities_per_accident <span class=hljs-operator >=</span> total_fatalities<span class=hljs-operator >/</span>total_accidents<span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  drop_na</code></pre> <p>Visualization code:</p> <pre><code class="r hljs">ggplot<span class=hljs-punctuation >(</span>data<span class=hljs-operator >=</span>fig1_data<span class=hljs-punctuation >,</span> aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>year<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>total_fatalities<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span>aes<span class=hljs-punctuation >(</span>size<span class=hljs-operator >=</span>fatalities_per_accident<span class=hljs-punctuation >,</span>colour<span class=hljs-operator >=</span>fatalities_per_accident<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> shape<span class=hljs-operator >=</span><span class=hljs-number >18</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  scale_colour_gradientn<span class=hljs-punctuation >(</span>
    colours<span class=hljs-operator >=</span><span class=hljs-built_in >c</span><span class=hljs-punctuation >(</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;#ff6361&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
 guides<span class=hljs-punctuation >(</span>
  color<span class=hljs-operator >=</span>guide_colorbar<span class=hljs-punctuation >(</span>
    title.position <span class=hljs-operator >=</span> <span class=hljs-string >&quot;top&quot;</span><span class=hljs-punctuation >,</span>
    title.hjust <span class=hljs-operator >=</span> <span class=hljs-number >.5</span><span class=hljs-punctuation >,</span>
    barwidth<span class=hljs-operator >=</span>unit<span class=hljs-punctuation >(</span><span class=hljs-number >20</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;lines&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    barheight<span class=hljs-operator >=</span>unit<span class=hljs-punctuation >(</span><span class=hljs-number >.5</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;lines&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
  <span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> size<span class=hljs-operator >=</span><span class=hljs-string >&quot;none&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-operator >+</span>
  labs<span class=hljs-punctuation >(</span>
    x<span class=hljs-operator >=</span><span class=hljs-string >&quot;&quot;</span><span class=hljs-punctuation >,</span>
    y<span class=hljs-operator >=</span><span class=hljs-string >&quot;&quot;</span><span class=hljs-punctuation >,</span>
    title<span class=hljs-operator >=</span><span class=hljs-string >&quot;Yearly Fatalities of Non-Military Aviation Passengers&quot;</span><span class=hljs-punctuation >,</span>
    subtitle <span class=hljs-operator >=</span> <span class=hljs-string >&quot;&quot;</span><span class=hljs-punctuation >,</span>
    colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;Fatalities per Incident&quot;</span><span class=hljs-punctuation >,</span>
    caption<span class=hljs-operator >=</span><span class=hljs-string >&quot;Source: Aviation Safety Network Dataset&quot;</span><span class=hljs-punctuation >,</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  coord_cartesian<span class=hljs-punctuation >(</span>clip<span class=hljs-operator >=</span><span class=hljs-string >&quot;off&quot;</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  theme_minimal<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  theme<span class=hljs-punctuation >(</span>
    legend.position <span class=hljs-operator >=</span> <span class=hljs-string >&quot;top&quot;</span><span class=hljs-punctuation >,</span>
    text <span class=hljs-operator >=</span> element_text<span class=hljs-punctuation >(</span>family<span class=hljs-operator >=</span><span class=hljs-string >&quot;Atkinson Hyperlegible&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    panel.grid <span class=hljs-operator >=</span> element_blank<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    axis.line <span class=hljs-operator >=</span> element_line<span class=hljs-punctuation >(</span>colour <span class=hljs-operator >=</span> <span class=hljs-string >&quot;lightgrey&quot;</span><span class=hljs-punctuation >,</span> linewidth <span class=hljs-operator >=</span> <span class=hljs-number >0.25</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    axis.ticks <span class=hljs-operator >=</span> element_line<span class=hljs-punctuation >(</span>colour <span class=hljs-operator >=</span> <span class=hljs-string >&quot;lightgrey&quot;</span><span class=hljs-punctuation >,</span> linewidth <span class=hljs-operator >=</span> <span class=hljs-number >0.25</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    plot.title<span class=hljs-operator >=</span>ggtext<span class=hljs-operator >::</span>element_textbox_simple<span class=hljs-punctuation >(</span>
      size<span class=hljs-operator >=</span>rel<span class=hljs-punctuation >(</span><span class=hljs-number >1.5</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> face<span class=hljs-operator >=</span><span class=hljs-string >&quot;bold&quot;</span><span class=hljs-punctuation >,</span>
      margin <span class=hljs-operator >=</span> margin<span class=hljs-punctuation >(</span><span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0.5</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;lines&quot;</span><span class=hljs-punctuation >)</span>
    <span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    plot.caption<span class=hljs-operator >=</span>ggtext<span class=hljs-operator >::</span>element_textbox_simple<span class=hljs-punctuation >(</span>halign<span class=hljs-operator >=</span><span class=hljs-number >0</span><span class=hljs-punctuation >)</span>
  <span class=hljs-punctuation >)</span></code></pre> <h1 id=second_visualization ><a href="#second_visualization" class=header-anchor >Second Visualization</a></h1> <div class=im-100 ><img src="/starcoffee/assets/posts/aviation-incident-viz/code/fig2.png" alt=""></div> <p>Data wrangling:</p> <pre><code class="r hljs">fig2_data <span class=hljs-operator >&lt;-</span> data <span class=hljs-operator >%&gt;%</span>
  mutate<span class=hljs-punctuation >(</span>operator <span class=hljs-operator >=</span> case_when<span class=hljs-punctuation >(</span>
    str_detect<span class=hljs-punctuation >(</span>operator<span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;AF|Air Force|Navy&quot;</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >~</span> <span class=hljs-string >&quot;Military&quot;</span><span class=hljs-punctuation >,</span>
    <span class=hljs-literal >TRUE</span> <span class=hljs-operator >~</span> <span class=hljs-string >&quot;Non-Military&quot;</span>
  <span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  mutate<span class=hljs-punctuation >(</span>operator <span class=hljs-operator >=</span> factor<span class=hljs-punctuation >(</span>operator<span class=hljs-punctuation >,</span> levels<span class=hljs-operator >=</span><span class=hljs-built_in >c</span><span class=hljs-punctuation >(</span><span class=hljs-string >&quot;Non-Military&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;Military&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  group_by<span class=hljs-punctuation >(</span>year<span class=hljs-punctuation >,</span> military<span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  summarize<span class=hljs-punctuation >(</span>
    total_incidents <span class=hljs-operator >=</span> n<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    total_fatalities <span class=hljs-operator >=</span> <span class=hljs-built_in >sum</span><span class=hljs-punctuation >(</span>fatalities<span class=hljs-punctuation >,</span> na.rm <span class=hljs-operator >=</span> <span class=hljs-literal >TRUE</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    .groups <span class=hljs-operator >=</span> <span class=hljs-string >&quot;keep&quot;</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  mutate<span class=hljs-punctuation >(</span>fatalities_per_accident <span class=hljs-operator >=</span> total_fatalities<span class=hljs-operator >/</span>total_incidents<span class=hljs-punctuation >)</span> <span class=hljs-operator >%&gt;%</span>
  drop_na</code></pre> <p>Visualization code:</p> <pre><code class="r hljs">regions <span class=hljs-operator >&lt;-</span> tibble<span class=hljs-punctuation >(</span>x1<span class=hljs-operator >=</span><span class=hljs-number >1939</span><span class=hljs-punctuation >,</span> x2<span class=hljs-operator >=</span><span class=hljs-number >1945</span><span class=hljs-punctuation >,</span> y1<span class=hljs-operator >=</span><span class=hljs-operator >-</span><span class=hljs-literal >Inf</span><span class=hljs-punctuation >,</span> y2<span class=hljs-operator >=</span><span class=hljs-operator >+</span><span class=hljs-literal >Inf</span><span class=hljs-punctuation >)</span>

ggplot<span class=hljs-punctuation >(</span>data<span class=hljs-operator >=</span>fig2_data<span class=hljs-punctuation >,</span> aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>year<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>total_fatalities<span class=hljs-punctuation >,</span> group<span class=hljs-operator >=</span>operator<span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span>operator<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_line<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span>aes<span class=hljs-punctuation >(</span>shape<span class=hljs-operator >=</span>operator<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  labs<span class=hljs-punctuation >(</span>
    x<span class=hljs-operator >=</span><span class=hljs-string >&quot;&quot;</span><span class=hljs-punctuation >,</span>
    y<span class=hljs-operator >=</span><span class=hljs-string >&quot;&quot;</span><span class=hljs-punctuation >,</span>
    title<span class=hljs-operator >=</span><span class=hljs-string >&quot;Yearly Fatalities of Aviation Passengers&quot;</span><span class=hljs-punctuation >,</span>
    subtitle <span class=hljs-operator >=</span> paste0<span class=hljs-punctuation >(</span><span class=hljs-string >&quot;Comparison between &lt;span style=&#x27;color:&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;#ff6361&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;&#x27;&gt;military&lt;/span&gt; and &lt;span style=&#x27;color:&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;&#x27;&gt;non-military&lt;/span&gt; flight operators&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    caption<span class=hljs-operator >=</span><span class=hljs-string >&quot;Source: Aviation Safety Network Dataset&quot;</span><span class=hljs-punctuation >,</span>
    colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;Operator&quot;</span><span class=hljs-punctuation >,</span>
    shape<span class=hljs-operator >=</span><span class=hljs-string >&quot;Operator&quot;</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  coord_cartesian<span class=hljs-punctuation >(</span>expand<span class=hljs-operator >=</span><span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span> clip<span class=hljs-operator >=</span><span class=hljs-string >&quot;off&quot;</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  theme_minimal<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  theme<span class=hljs-punctuation >(</span>
    legend.position <span class=hljs-operator >=</span> <span class=hljs-string >&quot;top&quot;</span><span class=hljs-punctuation >,</span>
    text <span class=hljs-operator >=</span> element_text<span class=hljs-punctuation >(</span>family<span class=hljs-operator >=</span><span class=hljs-string >&quot;Atkinson Hyperlegible&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    panel.grid <span class=hljs-operator >=</span> element_blank<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    axis.line <span class=hljs-operator >=</span> element_line<span class=hljs-punctuation >(</span>colour <span class=hljs-operator >=</span> <span class=hljs-string >&quot;lightgrey&quot;</span><span class=hljs-punctuation >,</span> linewidth <span class=hljs-operator >=</span> <span class=hljs-number >0.25</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    axis.ticks <span class=hljs-operator >=</span> element_line<span class=hljs-punctuation >(</span>colour <span class=hljs-operator >=</span> <span class=hljs-string >&quot;lightgrey&quot;</span><span class=hljs-punctuation >,</span> linewidth <span class=hljs-operator >=</span> <span class=hljs-number >0.25</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    plot.title<span class=hljs-operator >=</span>ggtext<span class=hljs-operator >::</span>element_textbox_simple<span class=hljs-punctuation >(</span>
      size<span class=hljs-operator >=</span>rel<span class=hljs-punctuation >(</span><span class=hljs-number >1.5</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> face<span class=hljs-operator >=</span><span class=hljs-string >&quot;bold&quot;</span><span class=hljs-punctuation >,</span>
      margin <span class=hljs-operator >=</span> margin<span class=hljs-punctuation >(</span><span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0.5</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;lines&quot;</span><span class=hljs-punctuation >)</span>
    <span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    plot.subtitle<span class=hljs-operator >=</span>ggtext<span class=hljs-operator >::</span>element_textbox_simple<span class=hljs-punctuation >(</span>margin <span class=hljs-operator >=</span> margin<span class=hljs-punctuation >(</span><span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0.5</span><span class=hljs-punctuation >,</span> <span class=hljs-number >0</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;lines&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    plot.caption<span class=hljs-operator >=</span>ggtext<span class=hljs-operator >::</span>element_textbox_simple<span class=hljs-punctuation >(</span>halign<span class=hljs-operator >=</span><span class=hljs-number >0</span><span class=hljs-punctuation >)</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  scale_x_continuous<span class=hljs-punctuation >(</span>breaks <span class=hljs-operator >=</span> scales<span class=hljs-operator >::</span>pretty_breaks<span class=hljs-punctuation >(</span>n <span class=hljs-operator >=</span> <span class=hljs-number >10</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  scale_colour_manual<span class=hljs-punctuation >(</span>values<span class=hljs-operator >=</span><span class=hljs-built_in >c</span><span class=hljs-punctuation >(</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;#ff6361&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_rect<span class=hljs-punctuation >(</span>
    data<span class=hljs-operator >=</span>regions<span class=hljs-punctuation >,</span> inherit.aes<span class=hljs-operator >=</span><span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    mapping<span class=hljs-operator >=</span>aes<span class=hljs-punctuation >(</span>xmin<span class=hljs-operator >=</span>x1<span class=hljs-punctuation >,</span> xmax<span class=hljs-operator >=</span>x2<span class=hljs-punctuation >,</span> ymin<span class=hljs-operator >=</span>y1<span class=hljs-punctuation >,</span> ymax<span class=hljs-operator >=</span>y2<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    color<span class=hljs-operator >=</span><span class=hljs-string >&quot;transparent&quot;</span><span class=hljs-punctuation >,</span> fill<span class=hljs-operator >=</span><span class=hljs-string >&quot;#ff6361&quot;</span><span class=hljs-punctuation >,</span> alpha<span class=hljs-operator >=</span><span class=hljs-number >.1</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  ggrepel<span class=hljs-operator >::</span>geom_text_repel<span class=hljs-punctuation >(</span>
    data <span class=hljs-operator >=</span> tibble<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span><span class=hljs-number >1945</span><span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span><span class=hljs-number >2000</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>x<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>y<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> label <span class=hljs-operator >=</span> <span class=hljs-string >&quot;WW2&quot;</span><span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;#ff6361&quot;</span><span class=hljs-punctuation >,</span> inherit.aes <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    nudge_x <span class=hljs-operator >=</span> <span class=hljs-number >7</span><span class=hljs-punctuation >,</span>
    nudge_y <span class=hljs-operator >=</span> <span class=hljs-number >50</span><span class=hljs-punctuation >,</span>
    segment.curvature <span class=hljs-operator >=</span> <span class=hljs-operator >-</span><span class=hljs-number >1e-20</span><span class=hljs-punctuation >,</span>
    arrow <span class=hljs-operator >=</span> arrow<span class=hljs-punctuation >(</span><span class=hljs-built_in >length</span> <span class=hljs-operator >=</span> unit<span class=hljs-punctuation >(</span><span class=hljs-number >0.015</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;npc&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    min.segment.length <span class=hljs-operator >=</span> <span class=hljs-number >0</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  ggrepel<span class=hljs-operator >::</span>geom_text_repel<span class=hljs-punctuation >(</span>
    data <span class=hljs-operator >=</span> tibble<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span><span class=hljs-number >2001</span><span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span><span class=hljs-number >649</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>x<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>y<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> label <span class=hljs-operator >=</span> <span class=hljs-string >&quot;September 11 Attacks&quot;</span><span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> inherit.aes <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    nudge_x <span class=hljs-operator >=</span> <span class=hljs-number >15</span><span class=hljs-punctuation >,</span>
    nudge_y <span class=hljs-operator >=</span> <span class=hljs-number >1000</span><span class=hljs-punctuation >,</span>
    segment.curvature <span class=hljs-operator >=</span> <span class=hljs-operator >-</span><span class=hljs-number >1e-20</span><span class=hljs-punctuation >,</span>
    arrow <span class=hljs-operator >=</span> arrow<span class=hljs-punctuation >(</span><span class=hljs-built_in >length</span> <span class=hljs-operator >=</span> unit<span class=hljs-punctuation >(</span><span class=hljs-number >0.015</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;npc&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    min.segment.length <span class=hljs-operator >=</span> <span class=hljs-number >0</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  ggrepel<span class=hljs-operator >::</span>geom_text_repel<span class=hljs-punctuation >(</span>
    data <span class=hljs-operator >=</span> tibble<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span><span class=hljs-number >1977</span><span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span><span class=hljs-number >1847</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>x<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>y<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> label <span class=hljs-operator >=</span> <span class=hljs-string >&quot;Tenerife Disaster&quot;</span><span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> inherit.aes <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    nudge_x <span class=hljs-operator >=</span> <span class=hljs-number >2</span><span class=hljs-punctuation >,</span>
    nudge_y <span class=hljs-operator >=</span> <span class=hljs-number >800</span><span class=hljs-punctuation >,</span>
    segment.curvature <span class=hljs-operator >=</span> <span class=hljs-operator >-</span><span class=hljs-number >1e-20</span><span class=hljs-punctuation >,</span>
    arrow <span class=hljs-operator >=</span> arrow<span class=hljs-punctuation >(</span><span class=hljs-built_in >length</span> <span class=hljs-operator >=</span> unit<span class=hljs-punctuation >(</span><span class=hljs-number >0.015</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;npc&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    min.segment.length <span class=hljs-operator >=</span> <span class=hljs-number >0</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  ggrepel<span class=hljs-operator >::</span>geom_text_repel<span class=hljs-punctuation >(</span>
    data <span class=hljs-operator >=</span> tibble<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span><span class=hljs-number >1985</span><span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span><span class=hljs-number >2358</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>x<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>y<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> label <span class=hljs-operator >=</span> <span class=hljs-string >&quot;Japan Air Lines Flight 123&quot;</span><span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> inherit.aes <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    nudge_x <span class=hljs-operator >=</span> <span class=hljs-number >30</span><span class=hljs-punctuation >,</span>
    nudge_y <span class=hljs-operator >=</span> <span class=hljs-number >300</span><span class=hljs-punctuation >,</span>
    segment.curvature <span class=hljs-operator >=</span> <span class=hljs-operator >-</span><span class=hljs-number >1e-20</span><span class=hljs-punctuation >,</span>
    arrow <span class=hljs-operator >=</span> arrow<span class=hljs-punctuation >(</span><span class=hljs-built_in >length</span> <span class=hljs-operator >=</span> unit<span class=hljs-punctuation >(</span><span class=hljs-number >0.015</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;npc&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    min.segment.length <span class=hljs-operator >=</span> <span class=hljs-number >0</span>
  <span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  ggrepel<span class=hljs-operator >::</span>geom_text_repel<span class=hljs-punctuation >(</span>
    data <span class=hljs-operator >=</span> tibble<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span><span class=hljs-number >1985</span><span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span><span class=hljs-number >2358</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    aes<span class=hljs-punctuation >(</span>x<span class=hljs-operator >=</span>x<span class=hljs-punctuation >,</span> y<span class=hljs-operator >=</span>y<span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span> label <span class=hljs-operator >=</span> <span class=hljs-string >&quot;Japan Air Lines Flight 123&quot;</span><span class=hljs-punctuation >,</span> colour<span class=hljs-operator >=</span><span class=hljs-string >&quot;#003f5c&quot;</span><span class=hljs-punctuation >,</span> inherit.aes <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
    nudge_x <span class=hljs-operator >=</span> <span class=hljs-number >30</span><span class=hljs-punctuation >,</span>
    nudge_y <span class=hljs-operator >=</span> <span class=hljs-number >300</span><span class=hljs-punctuation >,</span>
    segment.curvature <span class=hljs-operator >=</span> <span class=hljs-operator >-</span><span class=hljs-number >1e-20</span><span class=hljs-punctuation >,</span>
    arrow <span class=hljs-operator >=</span> arrow<span class=hljs-punctuation >(</span><span class=hljs-built_in >length</span> <span class=hljs-operator >=</span> unit<span class=hljs-punctuation >(</span><span class=hljs-number >0.015</span><span class=hljs-punctuation >,</span> <span class=hljs-string >&quot;npc&quot;</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >,</span>
    min.segment.length <span class=hljs-operator >=</span> <span class=hljs-number >0</span>
  <span class=hljs-punctuation >)</span></code></pre> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <a href="https://michaszj.github.io/">Michal Jagodzinski</a>. Last modified: May 09, 2024. <br>Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/starcoffee/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script> <label for=sidebar-checkbox  class=sidebar-toggle ></label>