<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/starcoffee/libs/katex/katex.min.css"> <link rel=stylesheet  href="/starcoffee/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/starcoffee/css/franklin.css"> <link rel=stylesheet  href="/starcoffee/css/poole_lanyon.css"> <link rel=stylesheet  href="/starcoffee/css/adjust.css"> <link rel=icon  href="/starcoffee/assets/favicon.png"> <title>SAT Work Log 4</title> <input type=checkbox  class=sidebar-checkbox  id=sidebar-checkbox > <div class=sidebar  id=sidebar > <div class=sidebar-item > <p>A theme adapted from <a href="http://lanyon.getpoole.com/" target=_blank >Lanyon</a>.</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/starcoffee/">Home</a> <a class="sidebar-nav-item " href="/starcoffee/posts/welcome-to-star-coffee/">Welcome to Star Coffee</a> <a class="sidebar-nav-item " href="/starcoffee/posts/projects/">Projects</a> <a class="sidebar-nav-item " href="/starcoffee/posts/satellite-analysis-toolkit/">Satellite Analysis Toolkit</a> <a class="sidebar-nav-item " href="/starcoffee/posts/simple-nn/">Simple NN</a> </nav> <div class=sidebar-item > <p>&copy; Michal Jagodzinski.</p> </div> </div> <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. --> <div class=wrap > <div class=masthead > <div class=container > <h3 class=masthead-title > <a href="/starcoffee/" title=Home >Star Coffee</a> <small>Writing about stuff, working in public</small> </h3> </div> </div> <div class="container content"> <div class=franklin-content ><h1 id=sat_work_log_4 ><a href="#sat_work_log_4" class=header-anchor >SAT Work Log 4</a></h1> <p><em>Work Log - April 13th, 2023</em></p> <div class=franklin-toc ><ol><li><a href="#plotting_multiple_satellites_in_groundtracker">Plotting Multiple Satellites in GroundTracker</a><li><a href="#ground_station_visibility_analysis">Ground Station Visibility Analysis</a><li><a href="#conclusion">Conclusion</a></ol></div> <div class=im-100 ><img src="https://source.unsplash.com/9G8K_nycv7s" alt="" /></div> <div class=img-caption >Photo by <a href="https://unsplash.com/photos/9G8K_nycv7s">Zetong Li</a></div> <p>Hello and welcome back to Star Coffee. I&#39;ve been pretty busy with life stuff this past week, so this will be a shorter post. But I still got some new cool stuff to showcase in the Satellite Analysis Toolkit.</p> <h2 id=plotting_multiple_satellites_in_groundtracker ><a href="#plotting_multiple_satellites_in_groundtracker" class=header-anchor >Plotting Multiple Satellites in GroundTracker</a></h2> <p>To plot multiple satellites, I first wrote a <code>GroundTrackerSatellite</code> struct to contain all the required information for plotting:</p> <pre><code class="julia hljs"><span class=hljs-keyword >mutable struct</span> GroundTrackerSatellite
    name::<span class=hljs-built_in >String</span>
    elements::Observable{<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}}
    ground_track_coords::<span class=hljs-built_in >Union</span>{Observable{<span class=hljs-built_in >Matrix</span>{<span class=hljs-built_in >Float64</span>}}, <span class=hljs-built_in >Nothing</span>}
    pos_coords::<span class=hljs-built_in >Union</span>{Observable{<span class=hljs-built_in >Matrix</span>{<span class=hljs-built_in >Float64</span>}}, <span class=hljs-built_in >Nothing</span>}

    <span class=hljs-keyword >function</span> GroundTrackerSatellite(
        name::<span class=hljs-built_in >String</span>,
        elements::Observable{<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}}
    )

        <span class=hljs-keyword >return</span> new(name, elements, <span class=hljs-literal >nothing</span>, <span class=hljs-literal >nothing</span>)
    <span class=hljs-keyword >end</span>
<span class=hljs-keyword >end</span></code></pre> <p>I defined the <code>ground_track_coords</code> and <code>pos_coords</code> fields as type unions as those values are undefined at first and later calculated, as they are dependent on the orbital elements of the satellite. The fields are also defined as <code>Observable</code> values to allow for interactive plotting.</p> <p>Now, a <code>Dict</code> of <code>GroundTrackerSatellite</code> structs can be used to plot multiple satellites in GroundTracker. This dictionary is initialized using the individual satellite elements, e.g.,</p> <pre><code class="julia hljs">sats = <span class=hljs-built_in >Dict</span>(
    <span class=hljs-string >&quot;Sat 1&quot;</span> =&gt; GroundTrackerSatellite(
        <span class=hljs-string >&quot;Sat 1&quot;</span>,
        Observable([
            <span class=hljs-number >10000</span>,
            <span class=hljs-number >0.19760</span>,
            deg2rad(<span class=hljs-number >60</span>),
            deg2rad(<span class=hljs-number >270</span>),
            deg2rad(<span class=hljs-number >45</span>),
            deg2rad(<span class=hljs-number >230</span>)
        ])
    ),
    <span class=hljs-string >&quot;Sat 2&quot;</span> =&gt; GroundTrackerSatellite(
        <span class=hljs-string >&quot;Sat 2&quot;</span>,
        Observable([
            <span class=hljs-number >8350</span>,
            <span class=hljs-number >0.05</span>,
            deg2rad(<span class=hljs-number >60</span>),
            deg2rad(<span class=hljs-number >270</span>),
            deg2rad(<span class=hljs-number >45</span>),
            deg2rad(<span class=hljs-number >50</span>)
        ])
    ),
)</code></pre> <p>I&#39;m planning to eventually write a constructor for this struct that implements <code>Unitful.jl</code> units and validation of the orbital element values.</p> <p>Next I rewrote the GroundTracker plotting and interactivity functions to loop through the <code>GroundTrackerSatellite</code> dictionary to update the orbit and ground track plots of each satellite. Based on the defined <code>Dict</code>, GroundTracker properly displays multiple satellites:</p> <div class=im-100 ><img src="/starcoffee/assets/posts/sat-work-log-4/code/multi-sat-plot.png" alt=""></div> <p>I&#39;ve also tried getting the <code>SliderGrid</code> to change its values when changing between satellites, but it doesn&#39;t work. The slider values don&#39;t visually update when changing between satellites, even though their internal values do. I&#39;ll keep working at it to try and get this functionality to work, but I may resort to using a dedicated GUI library to implement this. Plus text input in <code>Makie.jl</code> is also bugged, so using a GUI library would allow for that as well.</p> <h2 id=ground_station_visibility_analysis ><a href="#ground_station_visibility_analysis" class=header-anchor >Ground Station Visibility Analysis</a></h2> <p>An important consideration when deploying satellites is ground station visibility. The satellite must be in view of a ground station in order to send signals to it. For a satellite to be in view of a ground station with a minimum elevation angle <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ε</mi><mtext>min</mtext></msub></mrow><annotation encoding="application/x-tex">\varepsilon_\text{min}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.5806em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">ε</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">min</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, the following condition must be true:</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mfrac><mi>π</mi><mn>2</mn></mfrac><mo>−</mo><msup><mrow><mi>cos</mi><mo>⁡</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence=true >(</mo><mfrac><mrow><mover accent=true ><mi>n</mi><mo>^</mo></mover><mo>⋅</mo><mover accent=true ><mi>s</mi><mo>⃗</mo></mover></mrow><mrow><mi mathvariant=normal >∣</mi><mi mathvariant=normal >∣</mi><mi>s</mi><mi mathvariant=normal >∣</mi><mi mathvariant=normal >∣</mi></mrow></mfrac><mo fence=true >)</mo></mrow><mo>≥</mo><msub><mi>ε</mi><mtext>min</mtext></msub></mrow><annotation encoding="application/x-tex"> \frac{\pi}{2} - \cos^{-1} \left(\frac{\hat{n} \cdot \vec{s}}{||s||}\right) \geq \varepsilon_\text{min} </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.7936em;vertical-align:-0.686em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.1076em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >2</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:2.4em;vertical-align:-0.95em;"></span><span class=mop ><span class=mop >cos</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=minner ><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.391em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >∣∣</span><span class="mord mathnormal">s</span><span class=mord >∣∣</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.6944em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal">n</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.25em;"><span class=mord >^</span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >⋅</span><span class=mspace  style="margin-right:0.2222em;"></span><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal">s</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.5806em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">ε</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">min</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> <p>Where</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mover accent=true ><mi>s</mi><mo>⃗</mo></mover><mo>=</mo><msub><mover accent=true ><mi>r</mi><mo>⃗</mo></mover><mtext>sat</mtext></msub><mo>−</mo><msub><mover accent=true ><mi>r</mi><mo>⃗</mo></mover><mtext>gs</mtext></msub><mspace width=1em /><mspace width=1em /><mover accent=true ><mi>n</mi><mo>^</mo></mover><mo>=</mo><mfrac><msub><mover accent=true ><mi>r</mi><mo>⃗</mo></mover><mtext>gs</mtext></msub><mrow><mi mathvariant=normal >∣</mi><mi mathvariant=normal >∣</mi><msub><mover accent=true ><mi>r</mi><mo>⃗</mo></mover><mtext>gs</mtext></msub><mi mathvariant=normal >∣</mi><mi mathvariant=normal >∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \vec{s} = \vec{r}_{\text{sat}} - \vec{r}_{\text{gs}} \quad \quad \hat{n} = \frac{\vec{r}_{\text{gs}}}{||\vec{r}_{\text{gs}}||} </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.714em;"></span><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal">s</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.864em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">sat</span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1.0001em;vertical-align:-0.2861em;"></span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">gs</span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2861em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:1em;"></span><span class=mspace  style="margin-right:1em;"></span><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.6944em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal">n</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.25em;"><span class=mord >^</span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:2.3631em;vertical-align:-0.9721em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.391em;"><span style="top:-2.314em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >∣∣</span><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">gs</span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2861em;"><span></span></span></span></span></span></span><span class=mord >∣∣</span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ><span class="mord accent"><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.714em;"><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span><span style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class=accent-body  style="left:-0.1799em;"><span class=overlay  style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5 3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11 10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63 -1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1 -7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59 H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359 c-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">gs</span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> <p>For implementation in GroundTracker, the user just needs to specify the location and minimum elevation of a ground station, and then the condition needs to be calculated using the satellite&#39;s position in the ECI frame. Like each individual satellite, the ground stations can be stored as a <code>Dict</code> of <code>GroundStation</code> structs, defined as:</p> <pre><code class="julia hljs"><span class=hljs-keyword >struct</span> GroundStation
    name::<span class=hljs-built_in >String</span>
    position::<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}
    min_elevation::<span class=hljs-built_in >Float64</span>
<span class=hljs-keyword >end</span>

ground_stations = <span class=hljs-built_in >Dict</span>(
    <span class=hljs-string >&quot;GS 1&quot;</span> =&gt; GroundStation(
        <span class=hljs-string >&quot;GS 1&quot;</span>,
        [<span class=hljs-number >2761.8</span>, <span class=hljs-number >4783.5</span>, <span class=hljs-number >3189.0</span>],
        deg2rad(<span class=hljs-number >5.0</span>)
    )
)</code></pre> <p>Next the function to check the visibility condition can be simply written as:</p> <pre><code class="julia hljs"><span class=hljs-keyword >function</span> check_gs_visibility(
        station::GroundStation,
        sat_position::<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}
    )

    slant = sat_position - station.position
    slant_range = norm(slant)
    local_vert = station.position ./ norm(station.position)
    elevation = <span class=hljs-literal >π</span>/<span class=hljs-number >2</span> - acos(dot(local_vert, slant) / slant_range)

    <span class=hljs-keyword >return</span> elevation &gt;= station.min_elevation
<span class=hljs-keyword >end</span></code></pre> <p>To check if a satellite is in view of a ground station, the colour of marker or orbit line of the satellite can be set according to the visibility condition:</p> <div class=im-100 ><img src="/starcoffee/assets/posts/sat-work-log-4/code/visibility-plot.png" alt=""></div> <p>I still need to work on improving the implementation of this system, but the basic building blocks are there. As can be seen in the image above, it&#39;s currently impossible to differentiate the satellites apart, so I would need to implement unique pairs of colour for each individual satellite to use. I would also need to implement a way for visibility analysis to work with multiple ground stations. I could potentially create a dropdown menu to select a specific ground station to use for visibility analysis, as well as a toggle to turn visibility analysis on and off.</p> <h2 id=conclusion ><a href="#conclusion" class=header-anchor >Conclusion</a></h2> <p>I am planning to keep adding more features to GroundTracker over time. One big feature I&#39;d like to implement is thermal analysis, though this may become its own separate interactive tool instead. A satellite&#39;s thermal properties is another important consideration in satellite design, as some components require certain ranges of temperatures to function.</p> <p>Thanks for reading&#33; I will probably switch gears for the next post and start working on an interactive tool for plotting the results of simulations using the orbit propagators I defined in the previous posts. Until next time.</p> <div class=page-foot > <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <a href="https://michaszj.github.io/">Michal Jagodzinski</a>. Last modified: April 13, 2023. <br>Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> <script src="/starcoffee/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script> <label for=sidebar-checkbox  class=sidebar-toggle ></label>